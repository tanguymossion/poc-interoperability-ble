# Configuration ffigen pour CoreBluetooth (iOS)
#
# Génère des bindings Dart pour les APIs CoreBluetooth Objective-C
#
# Exécuter avec:
#   dart run ffigen --config ffigen_ios.yaml

name: CoreBluetoothBindings
description: Bindings for iOS CoreBluetooth framework

output: 'lib/src/ios/corebluetooth_bindings.dart'

language: objc

headers:
  entry-points:
    - '/Applications/Xcode-26.1.1.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS26.1.sdk/System/Library/Frameworks/CoreBluetooth.framework/Headers/CoreBluetooth.h'

# Configuration stricte : n'inclure QUE les classes CoreBluetooth
exclude-all-by-default: true

# Inclure uniquement les classes CoreBluetooth
objc-interfaces:
  include:
    - 'CBCentralManager'
    - 'CBPeripheral'
    - 'CBService'
    - 'CBCharacteristic'
    - 'CBDescriptor'
    - 'CBUUID'
    - 'CBManager'
    - 'CBPeer'
    - 'CBAttribute'
  generate-blocks-as-closures: true

# Inclure les protocoles pour les delegates
objc-protocols:
  include:
    - 'CBCentralManagerDelegate'
    - 'CBPeripheralDelegate'

# Inclure les enums CoreBluetooth
enums:
  include:
    - 'CBManagerState'
    - 'CBManagerAuthorization'
    - 'CBPeripheralState'
    - 'CBCharacteristicProperties'
    - 'CBAttributePermissions'
    - 'CBError'
    - 'CBATTError'
    - 'CBConnectionEventMatchingOption'
    - 'CBCentralManagerFeature'
    - 'CBConnectionEvent'
    - 'CBCharacteristicWriteType'

# Exclure explicitement les fonctions C et autres
functions:
  exclude:
    - '.*'

structs:
  exclude:
    - '.*'

unions:
  exclude:
    - '.*'

globals:
  exclude:
    - '.*'

macros:
  exclude:
    - '.*'

typedefs:
  exclude:
    - '.*'

# Preamble
preamble: |
  // Auto-generated by ffigen. Do not modify.
  //
  // Bindings pour CoreBluetooth (iOS)
  // Régénérer avec: dart run ffigen --config ffigen_ios.yaml
  //
  // ignore_for_file: type=lint
  // ignore_for_file: always_specify_types
  // ignore_for_file: camel_case_types
  // ignore_for_file: non_constant_identifier_names
  // ignore_for_file: unused_element
  // ignore_for_file: unused_field

# Configuration du compilateur
compiler-opts:
  - '-x'
  - 'objective-c'
  - '-isysroot'
  - '/Applications/Xcode-26.1.1.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS26.1.sdk'
  - '-mios-version-min=12.0'
  - '-fobjc-arc'
